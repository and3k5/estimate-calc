(()=>{"use strict";var t={d:(o,e)=>{for(var n in e)t.o(e,n)&&!t.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:e[n]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};t.r(o),t.d(o,{TimeSetup:()=>i,getNotationByName:()=>r,parseInput:()=>g});const e=[{notation:"s",singleName:"second",multiName:"seconds",propertyName:"seconds",order:3,ms:1e3,relativeAmount:1e3,visibleByDefault:!1},{notation:"m",singleName:"minute",multiName:"minutes",propertyName:"minutes",order:2,ms:6e4,relativeAmount:60,visibleByDefault:!0},{notation:"h",singleName:"hour",multiName:"hours",propertyName:"hours",order:1,ms:36e5,relativeAmount:60,visibleByDefault:!1},{notation:"d",singleName:"day",multiName:"days",propertyName:"days",order:0,ms:864e5,relativeAmount:24,visibleByDefault:!1}];e.forEach(((t,o,e)=>t.prev=e[o-1])),e.forEach(((t,o,e)=>t.next=e[o+1]));const n=e;function r(t,o){if(!Array.isArray(t))throw new Error("First argument must be an array");return t.filter((t=>t.notation==o))[0]}class i{constructor({defaultNotations:t=!0,notationsEditor:o=null}={defaultNotations:!0,notationsEditor:null}){if(this.notations=[],!0===t)for(const t of n)this.notations.push(Object.assign({},t));"function"==typeof o&&o(this.notations)}}function s(t,o){const e=o<0;e&&(o*=-1);const n=t.notations.concat().sort(((t,o)=>o.ms-t.ms)),r={};for(const t of n){const n=Math.floor(o/t.ms);r[t.propertyName]=e?-1*n:n,n>0&&(o-=n*t.ms)}return r}const a=/(?<amount>-?[0-9]+)(?<notation>[a-z])/gi;class u{constructor(t,o){this.notation=o,this.time=t,this.notationName}get notationName(){return this.notation.propertyName}get value(){return s(this.time.setup,this.time.totalMs)[this.notationName]}set value(t){const o=t-s(this.time.setup,this.time.totalMs)[this.notationName];0!==o&&(this.time.totalMs+=this.notation.ms*o)}}class l{constructor(t,o){if(this.values=[],this.totalMs=0,!(t instanceof i))throw new Error("Setup parameter required");this.setup=t;for(const o of t.notations)this.values.push(new u(this,o));"string"==typeof o?this.totalMs=l.parseTotalMsFromString(t,o):"number"==typeof o?this.totalMs=o:"object"==typeof o&&o instanceof l?this.totalMs=o.totalMs:"object"==typeof o&&null!=o&&(this.totalMs=function(t,o){let e=0;for(const n of t.notations)n.propertyName in o&&(e+=o[n.propertyName]*n.ms);return e}(t,o))}static parseTotalMsFromString(t,o){let e=0;for(const n of o.matchAll(a)){if(null==n.groups)throw new Error("missing groups");const o=r(t.notations,n.groups.notation);if(null==o)throw new Error("Did not find a notation for: "+n.groups.notation);e+=o.ms*parseInt(n.groups.amount)}return e}getNotationValue(t){const o=this.values.find((o=>o.notationName==t));if(null!=o)return o.value}add(t){for(const o of t.values){const t=this.values.find((t=>t.notationName==o.notationName));if(null==t)throw new Error("Time has different notation setup");t.value+=o.value}return this}sub(t){for(const o of t.values){const t=this.values.find((t=>t.notationName==o.notationName));if(null==t)throw new Error("Time has different notation setup");t.value-=o.value}return this}clone(){return new l(this.setup,this)}format(){const t=this.values.sort(((t,o)=>t.notation.order-o.notation.order));return null==t.find((t=>t.value))?this.formatNotationValue(t.find((t=>!0===t.notation.visibleByDefault))||t[0]):this.formatNotationValues(t.filter((t=>0!==t.value)))}formatNotationValues(t){return t.map((t=>this.formatNotationValue(t))).join(" ")}formatNotationValue(t){return t.value+""+t.notation.notation}}l.prototype.toString=function(){return this.format()};const f={name:"add",exec:function(t,o){return t.clone().add(o)}},m={name:"sub",exec:function(t,o){return t.clone().sub(o)}};function c(t){const o=[],e=Array.from(t);let n=0;const r=o,i=function(){e.splice(0,1),n++},s=function(){return e[0]},a=function(t){r.push(t)};for(;e.length>0;){let t=s();if("+"==t)n>0&&a(f);else if("-"==t)0===n&&a("0m"),a(m);else if("("==t){let o=0,e="";do{if("("===t&&o++,i(),t=s(),")"===t&&(o--,0===o))break;e+=t}while(")"!==t);a(c(e))}else u=t,0!==r.length&&"string"==typeof r[r.length-1]||r.push(""),r[r.length-1]+=u;i()}var u;return o}function p(t,o){return o.reduce(((o,e)=>("string"==typeof e?o.push(new l(t,e)):Array.isArray(e)?o.push(p(t,e)):o.push(e),o)),[])}function h(t,o){return p(t,c(o))}function d(t){if(t instanceof l)return t;if(Array.isArray(t))return N(t);throw new Error("Unsupported type")}function y(t){if(t instanceof l)throw new Error("Unsupported type");if(Array.isArray(t))throw new Error("Unsupported type");return t}function N(t){for(;t.length>1;){const[o,e,n]=t.splice(0,3),r=d(o),i=d(n),s=y(e);t.splice(0,0,s.exec(r,i))}return t[0]}function g(t,o){return N(h(t,o))}module.exports.calc=o})();