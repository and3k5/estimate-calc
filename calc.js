(()=>{"use strict";var t={d:(n,o)=>{for(var e in o)t.o(o,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:o[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{TimeSetup:()=>i,getNotationByName:()=>s,parseInput:()=>N});class o{constructor(t,n,o,e,r,s,i,a){this.notation=t,this.singleName=n,this.multiName=o,this.propertyName=e,this.order=r,this.ms=s,this.relativeAmount=i,this.visibleByDefault=a}}const e=[new o("s","second","seconds","seconds",3,1e3,1e3,!1),new o("m","minute","minutes","minutes",2,6e4,60,!0),new o("h","hour","hours","hours",1,36e5,60,!1),new o("d","day","days","days",0,864e5,24,!1)];e.forEach(((t,n,o)=>t.prev=o[n-1])),e.forEach(((t,n,o)=>t.next=o[n+1]));const r=e;function s(t,n){if(!Array.isArray(t))throw new Error("First argument must be an array");return t.filter((t=>t.notation==n))[0]}class i{constructor({defaultNotations:t=!0,notationsEditor:n=null}={defaultNotations:!0,notationsEditor:null}){if(this.notations=[],!0===t)for(const t of r)this.notations.push(Object.assign({},t));"function"==typeof n&&n(this.notations)}}function a(t,n){const o=n<0;o&&(n*=-1);const e=t.notations.concat().sort(((t,n)=>n.ms-t.ms)),r={};for(const t of e){const e=Math.floor(n/t.ms);r[t.propertyName]=o?-1*e:e,e>0&&(n-=e*t.ms)}return r}const u=/(?<amount>-?[0-9]+)(?<notation>[a-z])/gi;class l{constructor(t,n){this.notation=n,this.time=t,this.notationName}get notationName(){return this.notation.propertyName}get value(){return a(this.time.setup,this.time.totalMs)[this.notationName]}set value(t){const n=t-a(this.time.setup,this.time.totalMs)[this.notationName];0!==n&&(this.time.totalMs+=this.notation.ms*n)}}class f{constructor(t,n){if(this.values=[],this.totalMs=0,!(t instanceof i))throw new Error("Setup parameter required");this.setup=t;for(const n of t.notations)this.values.push(new l(this,n));"string"==typeof n?this.totalMs=f.parseTotalMsFromString(t,n):"number"==typeof n?this.totalMs=n:"object"==typeof n&&n instanceof f?this.totalMs=n.totalMs:"object"==typeof n&&null!=n&&(this.totalMs=function(t,n){let o=0;for(const e of t.notations)e.propertyName in n&&(o+=n[e.propertyName]*e.ms);return o}(t,n))}static parseTotalMsFromString(t,n){let o=0;for(const e of n.matchAll(u)){if(null==e.groups)throw new Error("missing groups");const n=s(t.notations,e.groups.notation);if(null==n)throw new Error("Did not find a notation for: "+e.groups.notation);o+=n.ms*parseInt(e.groups.amount)}return o}getNotationValue(t){const n=this.values.find((n=>n.notationName==t));if(null!=n)return n.value}add(t){for(const n of t.values){const t=this.values.find((t=>t.notationName==n.notationName));if(null==t)throw new Error("Time has different notation setup");t.value+=n.value}return this}sub(t){for(const n of t.values){const t=this.values.find((t=>t.notationName==n.notationName));if(null==t)throw new Error("Time has different notation setup");t.value-=n.value}return this}clone(){return new f(this.setup,this)}format(){const t=this.values.sort(((t,n)=>t.notation.order-n.notation.order));return null==t.find((t=>t.value))?this.formatNotationValue(t.find((t=>!0===t.notation.visibleByDefault))||t[0]):this.formatNotationValues(t.filter((t=>0!==t.value)))}formatNotationValues(t){return t.map((t=>this.formatNotationValue(t))).join(" ")}formatNotationValue(t){return t.value+""+t.notation.notation}}f.prototype.toString=function(){return this.format()};const c={name:"add",exec:function(t,n){return t.clone().add(n)}},h={name:"sub",exec:function(t,n){return t.clone().sub(n)}};function m(t){const n=[],o=Array.from(t);let e=0;const r=n,s=function(){o.splice(0,1),e++},i=function(){return o[0]},a=function(t){r.push(t)},u=function(){return 0!==r.length&&"string"==typeof r[r.length-1]};for(;o.length>0;){let t=i();if("+"==t)e>0&&a(c);else if("-"==t)0===e&&a("0m"),a(h);else if("("==t){let n=0,o="";do{if("("===t&&n++,s(),t=i(),")"===t&&(n--,0===n))break;o+=t}while(")"!==t);a(m(o))}else(""!==t.trim()||u())&&(l=t,u()||r.push(""),r[r.length-1]+=l);s()}var l;return n}function p(t,n){return n.reduce(((n,o)=>("string"==typeof o?n.push(new f(t,o)):Array.isArray(o)?n.push(p(t,o)):n.push(o),n)),[])}function y(t,n){return p(t,m(Array.isArray(n)?n.map((t=>"("+t+")")).join(" + "):n))}function d(t){if(null===t)return"null";if(void 0===t)return"undefined";if(Array.isArray(t)){let n=`array with ${t.length} item${1!==t.length?"s":""}`;if(t.length>0){const o=t.map((t=>d(t))).join(",");n+=` of the type${1!==o.length?"s":""} [${o}]`}return n}const n=typeof t;switch(n){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return n}return t.constructor.name}function g(t){if(t instanceof f)return t;if(Array.isArray(t))return v(t);throw new Error("Unsupported type: "+d(t))}function w(t){if(t instanceof f)throw new Error("Unsupported type: "+d(t));if(Array.isArray(t))throw new Error("Unsupported type: "+d(t));return t}function v(t){for(;t.length>1;){const[n,o,e]=t.splice(0,3),r=g(n),s=g(e),i=w(o);t.splice(0,0,i.exec(r,s))}return t[0]}function N(t,n){return v(y(t,n))}module.exports.calc=n})();