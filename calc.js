(()=>{"use strict";var t={d:(o,n)=>{for(var e in n)t.o(n,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};t.r(o),t.d(o,{TimeSetup:()=>i,getNotationByName:()=>r,parseInput:()=>v});const n=[{notation:"s",singleName:"second",multiName:"seconds",propertyName:"seconds",order:3,ms:1e3,relativeAmount:1e3,visibleByDefault:!1},{notation:"m",singleName:"minute",multiName:"minutes",propertyName:"minutes",order:2,ms:6e4,relativeAmount:60,visibleByDefault:!0},{notation:"h",singleName:"hour",multiName:"hours",propertyName:"hours",order:1,ms:36e5,relativeAmount:60,visibleByDefault:!1},{notation:"d",singleName:"day",multiName:"days",propertyName:"days",order:0,ms:864e5,relativeAmount:24,visibleByDefault:!1}];n.forEach(((t,o,n)=>t.prev=n[o-1])),n.forEach(((t,o,n)=>t.next=n[o+1]));const e=n;function r(t,o){if(!Array.isArray(t))throw new Error("First argument must be an array");return t.filter((t=>t.notation==o))[0]}class i{constructor({defaultNotations:t=!0,notationsEditor:o=null}={defaultNotations:!0,notationsEditor:null}){if(this.notations=[],!0===t)for(const t of e)this.notations.push(Object.assign({},t));"function"==typeof o&&o(this.notations)}}function s(t,o){const n=o<0;n&&(o*=-1);const e=t.notations.concat().sort(((t,o)=>o.ms-t.ms)),r={};for(const t of e){const e=Math.floor(o/t.ms);r[t.propertyName]=n?-1*e:e,e>0&&(o-=e*t.ms)}return r}const a=/(?<amount>-?[0-9]+)(?<notation>[a-z])/gi;class u{constructor(t,o){this.notation=o,this.time=t,this.notationName}get notationName(){return this.notation.propertyName}get value(){return s(this.time.setup,this.time.totalMs)[this.notationName]}set value(t){const o=t-s(this.time.setup,this.time.totalMs)[this.notationName];0!==o&&(this.time.totalMs+=this.notation.ms*o)}}class l{constructor(t,o){if(this.values=[],this.totalMs=0,!(t instanceof i))throw new Error("Setup parameter required");this.setup=t;for(const o of t.notations)this.values.push(new u(this,o));"string"==typeof o?this.totalMs=l.parseTotalMsFromString(t,o):"number"==typeof o?this.totalMs=o:"object"==typeof o&&o instanceof l?this.totalMs=o.totalMs:"object"==typeof o&&null!=o&&(this.totalMs=function(t,o){let n=0;for(const e of t.notations)e.propertyName in o&&(n+=o[e.propertyName]*e.ms);return n}(t,o))}static parseTotalMsFromString(t,o){let n=0;for(const e of o.matchAll(a)){if(null==e.groups)throw new Error("missing groups");const o=r(t.notations,e.groups.notation);if(null==o)throw new Error("Did not find a notation for: "+e.groups.notation);n+=o.ms*parseInt(e.groups.amount)}return n}getNotationValue(t){const o=this.values.find((o=>o.notationName==t));if(null!=o)return o.value}add(t){for(const o of t.values){const t=this.values.find((t=>t.notationName==o.notationName));if(null==t)throw new Error("Time has different notation setup");t.value+=o.value}return this}sub(t){for(const o of t.values){const t=this.values.find((t=>t.notationName==o.notationName));if(null==t)throw new Error("Time has different notation setup");t.value-=o.value}return this}clone(){return new l(this.setup,this)}format(){const t=this.values.sort(((t,o)=>t.notation.order-o.notation.order));return null==t.find((t=>t.value))?this.formatNotationValue(t.find((t=>!0===t.notation.visibleByDefault))||t[0]):this.formatNotationValues(t.filter((t=>0!==t.value)))}formatNotationValues(t){return t.map((t=>this.formatNotationValue(t))).join(" ")}formatNotationValue(t){return t.value+""+t.notation.notation}}l.prototype.toString=function(){return this.format()};const f={name:"add",exec:function(t,o){return t.clone().add(o)}},c={name:"sub",exec:function(t,o){return t.clone().sub(o)}};function m(t){const o=[],n=Array.from(t);let e=0;const r=o,i=function(){n.splice(0,1),e++},s=function(){return n[0]},a=function(t){r.push(t)},u=function(){return 0!==r.length&&"string"==typeof r[r.length-1]};for(;n.length>0;){let t=s();if("+"==t)e>0&&a(f);else if("-"==t)0===e&&a("0m"),a(c);else if("("==t){let o=0,n="";do{if("("===t&&o++,i(),t=s(),")"===t&&(o--,0===o))break;n+=t}while(")"!==t);a(m(n))}else(""!==t.trim()||u())&&(l=t,u()||r.push(""),r[r.length-1]+=l);i()}var l;return o}function p(t,o){return o.reduce(((o,n)=>("string"==typeof n?o.push(new l(t,n)):Array.isArray(n)?o.push(p(t,n)):o.push(n),o)),[])}function h(t,o){return p(t,m(Array.isArray(o)?o.map((t=>"("+t+")")).join(" + "):o))}function y(t){if(null===t)return"null";if(void 0===t)return"undefined";if(Array.isArray(t)){let o=`array with ${t.length} item${1!==t.length?"s":""}`;if(t.length>0){const n=t.map((t=>y(t))).join(",");o+=` of the type${1!==n.length?"s":""} [${n}]`}return o}const o=typeof t;switch(o){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return o}return t.constructor.name}function d(t){if(t instanceof l)return t;if(Array.isArray(t))return N(t);throw new Error("Unsupported type: "+y(t))}function g(t){if(t instanceof l)throw new Error("Unsupported type: "+y(t));if(Array.isArray(t))throw new Error("Unsupported type: "+y(t));return t}function N(t){for(;t.length>1;){const[o,n,e]=t.splice(0,3),r=d(o),i=d(e),s=g(n);t.splice(0,0,s.exec(r,i))}return t[0]}function v(t,o){return N(h(t,o))}module.exports.calc=o})();